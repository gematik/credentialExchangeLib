= Credential Exchange Library for kotlin

== Issuer
Please note that the issuer acts as verifier if he needs additional data from the holder to issue the credential.

[plantuml]
.state diagram issuer
----
@startuml

[*] --> Initialized
Initialized --> SendOffer : receive invitation
Initialized --> Closed : close
SendOffer --> WaitForRequest : send offer
SendOffer --> Closed : close
WaitForRequest --> SubmitCredential : receive request
WaitForRequest --> Closed : close
SubmitCredential --> CredentialSubmitted : send credential
SubmitCredential --> HolderVerification : send presentation request
SubmitCredential --> Closed : close
HolderVerification --> SubmitCredential : receive credential
HolderVerification --> Closed : close
CredentialSubmitted --> Closed : close
Closed --> [*]

@enduml
----

== Holder
Please note that the holder should always verify the trustworthiness of the issuer before present credentials. Nevertheless, the step is optional in the credential exchange protocol, because the verification may be provided somewhere else (e.g. client/server authentication on transport layer).

[plantuml]
.state diagram holder
----
@startuml

[*] --> Initialized
Initialized --> WaitForOffer : send invitation
Initialized --> Closed : close
WaitForOffer --> SendRequest : receive offer
WaitForOffer --> Closed : close
SendRequest --> WaitForCredential : send request
SendRequest --> Closed : close
WaitForCredential --> CredentialReceived : receive credential
WaitForCredential --> HolderVerification : receive presentation request
WaitForCredential --> Closed : close
HolderVerification --> WaitForCredential : send presentation
HolderVerification --> Closed : close
CredentialReceived --> Closed : close

@enduml
----